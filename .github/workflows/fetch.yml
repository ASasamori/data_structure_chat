name: hourly-fetch

on:
  workflow_dispatch:
  schedule:
    - cron: '18 * * * *'

jobs:
  fetch:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Create virtualenv
        run: python -m venv .venv

      - name: Activate, install & run
        run: |
          source .venv/bin/activate
          pip install requests python-dotenv
          python fetch_courses.py >> fetch.log

      - name: Show fetch.log
        run: cat fetch.log
